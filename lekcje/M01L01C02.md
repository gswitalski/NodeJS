# Rozdział M01L01C02: Instalacja środowiska BUN

## Wprowadzenie

W poprzednim rozdziale zainstalowałeś Node.js - popularny i sprawdzony runtime JavaScript. Teraz poznasz BUN - nowoczesną alternatywę, która oferuje znacznie lepszą wydajność i wbudowaną obsługę TypeScript bez dodatkowej konfiguracji.

BUN to wszystko-w-jednym runtime JavaScript i TypeScript, który został zaprojektowany z myślą o szybkości. W przeciwieństwie do Node.js, BUN:
- **Startuje nawet 4x szybciej** niż Node.js
- **Ma wbudowaną obsługę TypeScript** - nie musisz kompilować kodu przed uruchomieniem
- **Zawiera bundler, transpiler i package manager** w jednym narzędziu
- **Jest kompatybilny z Node.js APIs** - większość kodu Node.js działa bez zmian

Jako programista TypeScript szczególnie docenisz możliwość uruchamiania plików `.ts` bezpośrednio, bez konieczności kompilacji do JavaScript.

## Instalacja BUN w Windows

### Metoda 1: Instalacja przez PowerShell (Zalecana)

BUN można zainstalować jednym poleceniem w PowerShell:

1. **Otwórz PowerShell jako Administrator**
   - Naciśnij `Windows + X`
   - Wybierz **"Windows PowerShell (Admin)"** lub **"Terminal (Admin)"**
   - Jeśli system pyta o uprawnienia, kliknij **"Tak"**

2. **Uruchom polecenie instalacyjne**
   ```powershell
   irm bun.sh/install.ps1 | iex
   ```
   
   To polecenie:
   - Pobiera najnowszą wersję BUN
   - Instaluje ją w katalogu `%USERPROFILE%\.bun`
   - Automatycznie dodaje BUN do zmiennej PATH

3. **Poczekaj na zakończenie instalacji**
   - Proces potrwa 1-2 minuty
   - Zobaczysz komunikaty o postępie pobierania i instalacji

### Metoda 2: Instalacja przez npm (Alternatywna)

Jeśli masz już zainstalowany Node.js z poprzedniego rozdziału, możesz zainstalować BUN jako globalny pakiet npm:

```powershell
npm install -g bun
```

**Uwaga**: Ta metoda instaluje BUN jako pakiet Node.js, co może nie dawać optymalnej wydajności. Zalecamy pierwszą metodę.

## Weryfikacja instalacji

### Sprawdź wersję BUN

Po zakończeniu instalacji **zamknij i ponownie otwórz PowerShell**, a następnie sprawdź instalację:

```powershell
bun --version
```

**Oczekiwany wynik:**
```
1.0.7
```
(lub nowsza wersja)

### Test podstawowej funkcjonalności

Przetestuj działanie BUN:

```powershell
bun --help
```

Powinieneś zobaczyć listę dostępnych poleceń i opcji.

### Test uruchomienia kodu JavaScript

```powershell
bun -e "console.log('Hello from BUN!')"
```

**Oczekiwany wynik:**
```
Hello from BUN!
```

## Porównanie wydajności Node.js vs BUN

### Test szybkości startu

Stwórzmy prosty test, aby zobaczyć różnicę w szybkości startu między Node.js a BUN.

1. **Utwórz plik testowy `startup-test.js`**
   ```javascript
   console.time('Startup time');
   console.log('Runtime started successfully!');
   console.timeEnd('Startup time');
   ```

2. **Przetestuj Node.js**
   ```powershell
   node startup-test.js
   ```
   
   **Przykładowy wynik:**
   ```
   Runtime started successfully!
   Startup time: 45.123ms
   ```

3. **Przetestuj BUN**
   ```powershell
   bun startup-test.js
   ```
   
   **Przykładowy wynik:**
   ```
   Runtime started successfully!
   Startup time: 12.456ms
   ```

**Obserwacja**: BUN powinien startować 2-4x szybciej niż Node.js.

### Test obsługi TypeScript

Największą zaletą BUN jest natywna obsługa TypeScript. Przetestujmy to:

1. **Utwórz plik `typescript-test.ts`**
   ```typescript
   interface User {
     name: string;
     age: number;
   }
   
   const user: User = {
     name: "Jan Kowalski",
     age: 30
   };
   
   console.log(`Witaj ${user.name}, masz ${user.age} lat!`);
   ```

2. **Przetestuj z Node.js** (będzie błąd)
   ```powershell
   node typescript-test.ts
   ```
   
   **Oczekiwany błąd:**
   ```
   SyntaxError: Missing initializer in const declaration
   ```

3. **Przetestuj z BUN** (zadziała bez problemu)
   ```powershell
   bun typescript-test.ts
   ```
   
   **Oczekiwany wynik:**
   ```
   Witaj Jan Kowalski, masz 30 lat!
   ```

**Obserwacja**: BUN uruchamia kod TypeScript bezpośrednio, bez konieczności kompilacji.

## Konfiguracja BUN jako domyślnego runtime

### Sprawdzenie lokalizacji BUN

Sprawdź, gdzie został zainstalowany BUN:

```powershell
where bun
```

**Oczekiwany wynik:**
```
C:\Users\[TwojaNazwa]\.bun\bin\bun.exe
```

### Konfiguracja dla projektów

Możesz konfigurować, który runtime używać na poziomie projektu:

1. **Stwórz plik `.runtime` w katalogu projektu**
   ```
   bun
   ```

2. **Lub użyj package.json**
   ```json
   {
     "scripts": {
       "start": "bun index.ts",
       "dev": "bun --watch index.ts"
     }
   }
   ```

### Alias w PowerShell (opcjonalne)

Możesz stworzyć alias, aby łatwiej przełączać się między runtime'ami:

```powershell
# Dodaj do profilu PowerShell
Set-Alias node-run node
Set-Alias bun-run bun
```

## Podstawowe polecenia BUN

### Package Management

BUN zawiera wbudowany package manager, który jest kompatybilny z npm:

```powershell
# Instalacja pakietów (szybsza niż npm)
bun install

# Dodanie nowego pakietu
bun add express
bun add -d @types/express  # development dependency

# Uruchomienie skryptów
bun run start
bun run dev
```

### Uruchamianie plików

```powershell
# Uruchomienie pliku JavaScript
bun index.js

# Uruchomienie pliku TypeScript
bun index.ts

# Tryb watch (automatyczne przeładowanie przy zmianach)
bun --watch index.ts

# Tryb hot reload
bun --hot index.ts
```

## Kiedy używać Node.js a kiedy BUN?

### Użyj **Node.js** gdy:
- Pracujesz z legacy codebase
- Potrzebujesz maksymalnej kompatybilności z ekosystemem npm
- Projekt wymaga specyficznych pakietów dostępnych tylko dla Node.js
- Wdrażasz na platformy, które nie wspierają BUN

### Użyj **BUN** gdy:
- Tworzysz nowy projekt TypeScript
- Zależy Ci na maksymalnej wydajności
- Chcesz uproszczoną konfigurację (brak transpilacji TS)
- Potrzebujesz szybkiej instalacji pakietów
- Rozwijasz aplikacje lokalnie (development)

## Troubleshooting

### Problem: "bun: command not found"

**Rozwiązanie:**
1. Zamknij i ponownie otwórz PowerShell
2. Sprawdź zmienne środowiskowe PATH:
   ```powershell
   $env:PATH -split ';' | Select-String bun
   ```
3. Jeśli BUN nie ma w PATH, dodaj ręcznie:
   ```powershell
   $bunPath = "$env:USERPROFILE\.bun\bin"
   $env:PATH += ";$bunPath"
   ```

### Problem: Błędy uprawnień podczas instalacji

**Rozwiązanie:**
- Uruchom PowerShell jako Administrator
- Sprawdź, czy nie blokuje antywirus
- Spróbuj instalacji przez npm: `npm install -g bun`

### Problem: BUN nie uruchamia plików TypeScript

**Rozwiązanie:**
- Sprawdź wersję BUN: `bun --version`
- Upewnij się, że używasz plików `.ts`, nie `.js`
- Sprawdź składnię TypeScript w pliku

## Podsumowanie

Świetnie! Teraz masz zainstalowane oba runtime'y - Node.js i BUN. Umożliwia Ci to:

✅ **Node.js** - sprawdzony runtime z największym ekosystemem  
✅ **BUN** - szybki runtime z natywną obsługą TypeScript  
✅ **Porównanie wydajności** - widzisz różnice w praktyce  
✅ **Elastyczność wyboru** - możesz używać odpowiedniego narzędzia do zadania  

### Co dalej?

W następnej lekcji stworzysz swój pierwszy projekt, używając obu runtime'ów, i poznasz różnice w zarządzaniu pakietami między npm (Node.js) a wbudowanym package managerem BUN.

### Przydatne polecenia do zapamiętania

```powershell
# BUN - podstawowe polecenia
bun --version                 # Sprawdzenie wersji
bun file.ts                   # Uruchomienie pliku TypeScript
bun --watch file.ts           # Tryb watch
bun install                   # Instalacja pakietów
bun add package-name          # Dodanie pakietu
bun run script-name           # Uruchomienie skryptu

# Porównanie startup time
node file.js                  # Node.js
bun file.js                   # BUN (szybszy)
```

### Następne kroki

Teraz gdy masz oba środowiska skonfigurowane, jesteś gotowy na tworzenie pierwszych projektów. W następnym rozdziale wykorzystasz wiedzę o obu runtime'ach do stworzenia i porównania prostych projektów.
